<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script src="/javascripts/jquery-1.11.3.min.js"></script>
</script>
<style>
.usable {
	-moz-box-shadow:inset 0px 1px 0px 0px #a4e271;
	-webkit-box-shadow:inset 0px 1px 0px 0px #a4e271;
	box-shadow:inset 0px 1px 0px 0px #a4e271;
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #89c403), color-stop(1, #77a809));
	background:-moz-linear-gradient(top, #89c403 5%, #77a809 100%);
	background:-webkit-linear-gradient(top, #89c403 5%, #77a809 100%);
	background:-o-linear-gradient(top, #89c403 5%, #77a809 100%);
	background:-ms-linear-gradient(top, #89c403 5%, #77a809 100%);
	background:linear-gradient(to bottom, #89c403 5%, #77a809 100%);
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#89c403', endColorstr='#77a809',GradientType=0);
	background-color:#89c403;
	-moz-border-radius:6px;
	-webkit-border-radius:6px;
	border-radius:6px;
	border:1px solid #74b807;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:8px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528009;
}
.usable:hover {
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #77a809), color-stop(1, #89c403));
	background:-moz-linear-gradient(top, #77a809 5%, #89c403 100%);
	background:-webkit-linear-gradient(top, #77a809 5%, #89c403 100%);
	background:-o-linear-gradient(top, #77a809 5%, #89c403 100%);
	background:-ms-linear-gradient(top, #77a809 5%, #89c403 100%);
	background:linear-gradient(to bottom, #77a809 5%, #89c403 100%);
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#77a809', endColorstr='#89c403',GradientType=0);
	background-color:#77a809;
}
.usable:active {
	position:relative;
	top:1px;
}
.notusable {
	-moz-box-shadow:inset 0px 1px 0px 0px #f5978e;
	-webkit-box-shadow:inset 0px 1px 0px 0px #f5978e;
	box-shadow:inset 0px 1px 0px 0px #f5978e;
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #f24537), color-stop(1, #c62d1f));
	background:-moz-linear-gradient(top, #f24537 5%, #c62d1f 100%);
	background:-webkit-linear-gradient(top, #f24537 5%, #c62d1f 100%);
	background:-o-linear-gradient(top, #f24537 5%, #c62d1f 100%);
	background:-ms-linear-gradient(top, #f24537 5%, #c62d1f 100%);
	background:linear-gradient(to bottom, #f24537 5%, #c62d1f 100%);
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f24537', endColorstr='#c62d1f',GradientType=0);
	background-color:#f24537;
	-moz-border-radius:6px;
	-webkit-border-radius:6px;
	border-radius:6px;
	border:1px solid #d02718;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:8px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #810e05;
}
.notusable:hover {
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #c62d1f), color-stop(1, #f24537));
	background:-moz-linear-gradient(top, #c62d1f 5%, #f24537 100%);
	background:-webkit-linear-gradient(top, #c62d1f 5%, #f24537 100%);
	background:-o-linear-gradient(top, #c62d1f 5%, #f24537 100%);
	background:-ms-linear-gradient(top, #c62d1f 5%, #f24537 100%);
	background:linear-gradient(to bottom, #c62d1f 5%, #f24537 100%);		filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#c62d1f', endColorstr='#f24537',GradientType=0);
	background-color:#c62d1f;
}
.mysubmit:active {
	position:relative;
	top:1px;
}


</style>


</head>
<body>
	<%
	var cabinetSize = cabinet_status.length;
	for(var i =0; i<cabinetSize; i++)
	{
		var cabinetNumber = cabinet_status[i].번호;
		var cabinetState = cabinet_status[i].사용;

		if(cabinetState==0) {
			%>
			<script>

			$(function(){

				var tag = $('#<%=cabinetNumber%>');
				tag.addClass('notusable');
			}
		);
		</script>
		<%	}
		else{
			%>
			<script>
			$(function(){
				var tag = $('#<%=cabinetNumber%>');
				tag.addClass('usable');
			}
		);

		</script>
		<% 	}
		if(i==cabinetSize-1){
			var grade = student_infos.grade;
			var id = student_infos.id;
			var name= student_infos.name;
			var cabinet = student_infos.cabinet;
			%>

			<script>

			$(function(){
				$(".usable").click(
					function(){
						var selected = $(this).val();
						var result= confirm(selected+" 신청하시겠습니까?");

						if(result)	  $("#APPLY").submit();
						else return false;
					}
				);
				$(".notusable").click(
					function(){
						alert("이미 신청된 사물함입니다.");
						return false;
					}
				);

				});


			</script>
			<%
		}
	}
	%>


	<script>

	  $(function(){

	$('[name=id]').val('<%=id%>');
	$('[name= name]').val('<%=name%>');
	$('[name= cabinetOld]').val('<%=cabinet%>');
	$('[name= grade]').val('<%=grade%>');
	if("<%=cabinet%>"=="false") $('flag').val('0'); //신규
	else $('[name= flag]').val('1')  //변경

	$('#id').text('<%=id%>');
	$('#grade').text('<%=grade%>');
	$('#name').text('<%=name%>');
	if("<%=cabinet%>"=="false") $('#cabinet').text('없음');
	else $('#cabinet').text('<%=cabinet%>');

	});
	var status=<%=msg%>;

	if(status=='0')
	alert('로그인완료');
	else if(status=='1')
	alert('사물함신청완료');
	else if(status=='5')
	alert('접근가능 시간이 아닙니다.')
	else
	alert('이미 신청되었습니다.');

	</script>

	<form id="APPLY" action="/apply" method="post">
	<input type='hidden' name='flag' value='0'/> <!--flag 0: 변경 1: 신청 -->
	<input type='hidden' name='id'  value='0'/>
	<input type='hidden' name='name' value='0'/>
	<input type='hidden' name='grade' value='0'/>
	<input type='hidden' name='cabinetOld' value='0'/>
	<table>
		<tr rowspan='2'>
			<td colspan='2'><h1 id='head'>1학년 사물함신청 페이지</h1></td>
		</tr>

		<tr rowspan='6'>
			<td colspan='2' border='1'>
				<div id="logInfo">
					<p>학번:<p id='id'></p></p>
					<p>이름:<p id='name'></p></p>
					<p>학년:<p id='grade'></p></p>
					<p>신청 사물함:<p id='cabinet'></p></p>
				</div>
			</td>
			<td colspan='6'>
				<table border="2">
					<form action="/apply" method="post">
						<tr>
							<td rowspan="6" colspan="6"> </td>
							<td rowspan="9" colspan="2">계단</td>
							<td><input type="submit" name="cabinet" id="A57" value="A57" /></td>
							<td><input type="submit" name="cabinet" id="A60" value="A60" /></td>
							<td><input type="submit" name="cabinet" id="A63" value="A63" /></td>
							<td rowspan="9" colspan="2">복도</td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A56" value="A56" /></td>
							<td><input type="submit" name="cabinet" id="A59" value="A59" /></td>
							<td><input type="submit" name="cabinet" id="A62" value="A62" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A55" value="A55" /></td>
							<td><input type="submit" name="cabinet" id="A58" value="A58" /></td>
							<td><input type="submit" name="cabinet" id="A61" value="A61" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A48" value="A48" /></td>
							<td><input type="submit" name="cabinet" id="A51" value="A51" /></td>
							<td><input type="submit" name="cabinet" id="A54" value="A54" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A47" value="A47" /></td>
							<td><input type="submit" name="cabinet" id="A50" value="A50" /></td>
							<td><input type="submit" name="cabinet" id="A53" value="A53" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A46" value="A46" /></td>
							<td><input type="submit" name="cabinet" id="A49" value="A49" /></td>
							<td><input type="submit" name="cabinet" id="A52" value="A52" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A73" value="A73" /></td>
							<td><input type="submit" name="cabinet" id="A74" value="A74" /></td>
							<td><input type="submit" name="cabinet" id="A75" value="A75" /></td>
							<td><input type="submit" name="cabinet" id="A64" value="A64" /></td>
							<td><input type="submit" name="cabinet" id="A65" value="A65" /></td>
							<td><input type="submit" name="cabinet" id="A66" value="A66" /></td>
							<td><input type="submit" name="cabinet" id="A39" value="A39" /></td>
							<td><input type="submit" name="cabinet" id="A42" value="A42" /></td>
							<td><input type="submit" name="cabinet" id="A45" value="A45" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A76" value="A76" /></td>
							<td><input type="submit" name="cabinet" id="A77" value="A77" /></td>
							<td><input type="submit" name="cabinet" id="A78" value="Axx" /></td>
							<td><input type="submit" name="cabinet" id="A67" value="A67" /></td>
							<td><input type="submit" name="cabinet" id="A68" value="A68" /></td>
							<td><input type="submit" name="cabinet" id="A69" value="A69" /></td>
							<td><input type="submit" name="cabinet" id="A38" value="A38" /></td>
							<td><input type="submit" name="cabinet" id="A41" value="A41" /></td>
							<td><input type="submit" name="cabinet" id="A44" value="A44" /></td>
						</tr>

						<tr>
							<td><input type="submit" name="cabinet" id="A79" value="A79" /></td>
							<td><input type="submit" name="cabinet" id="A80" value="A80" /></td>
							<td><input type="submit" name="cabinet" id="A81" value="A81" /></td>
							<td><input type="submit" name="cabinet" id="A70" value="A70" /></td>
							<td><input type="submit" name="cabinet" id="A71" value="A71" /></td>
							<td><input type="submit" name="cabinet" id="A72" value="A72" /></td>
							<td><input type="submit" name="cabinet" id="A37" value="A37" /></td>
							<td><input type="submit" name="cabinet" id="A40" value="A40" /></td>
							<td><input type="submit" name="cabinet" id="A43" value="A43" /></td>
						</tr>

						<tr>
							<td rowspan="2" colspan="13">복도</td>
						</tr>
						<tr>   </tr>

						<tr>
							<td rowspan="2" colspan="6">232</td>
							<td rowspan="2" colspan="7">화장실</td>
						</tr>

					</form>
				</table>
			</td>
		</table>

	</body>
	</html>
